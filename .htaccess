Options +FollowSymLinks -MultiViews -Indexes
# Turn mod_rewrite on
RewriteEngine On

# IMPORTANT: App is now at domain root, set base accordingly
RewriteBase /

# Backward compatibility: internally strip leading /MIS/ from requests
RewriteCond %{REQUEST_URI} ^/MIS/(.*)$ [NC]
RewriteRule ^MIS/(.*)$ /$1 [L,QSA]

## Externally redirect /foo.php to /foo (GET requests only, to avoid breaking POST forms)
RewriteCond %{REQUEST_METHOD} =GET
RewriteCond %{THE_REQUEST} \s([^.]+)\.php\s [NC]
RewriteRule ^ %1 [R=301,L,NC]

## Internally rewrite /foo to /foo.php only if the .php file exists
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME}.php -f
RewriteRule ^(.+)$ $1.php [L]